# vivo50思路分析
## 项目模块
1. 文章列表&文章详情
2. 我的(用户)文章列表&文章详情
3. 浏览量更新 使用redis实现更新
    1. 添加Runner 在应用启动时将博客浏览量缓存到redis中
    2. 添加切面方法 在访问文章详情后更新redis中的浏览量
    3. 添加定时任务 每隔10min刷新redis数据
    4. 修改浏览量读取路径 改为从redis中读取
       - 要记得将新提交的项目的浏览量(0)添加到redis中


## 积分模块
- 积分命名 : 鸡腿(暂定)
1. 积分获取
    - 用户每天登录获取积分
    - TODO 连续登录获取额外积分
    - TODO 管理员奖励积分
2. 基于积分的推送机制
    - 推送除浏览量加权外 增加发布人**累积**积分推送加权
    - 如果和访问量进行综合考量的话 比较快的方法是使用redis
      - 将积分和浏览量分别缓存
      - **错误记录**: redis中记录了在sql中已经删除的用户记录 导致刷新时UPDATE语句执行错误
3. 积分使用
    - 为众筹计划投积分 每个项目最高3点积分

### 推送机制思路
1. 查询出所有状态正常的文章
2. 获取redis中的浏览量
3. 查询其创造者的累积积分

- 注意点 用户积分也可能存在高并发的问题
- 解决方案: 
  - 和访问量类似 在启动时将数据缓存到redis中 缓解sql压力
  - 定时查询mysql, 更新redis数据
  - 积分交易的高并发 暂时不会 等之后学了再说

- 有铸币算法写多了, 天天考虑大数据量的问题
- 有铸币mybatis plus用多了, 都忘记可以自己手动分页了 浪费2h